---
layout: none
---

<!DOCTYPE html>
<html>
<head>
  <title>Extracted Links</title>
  <style>
    table {
      width: 100vw;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      width: 200px;
      text-overflow: ellipsis;
      word-break: break-all;
    }
    th {
      background-color: #f4f4f4;
    }
    #searchBox {
      margin-bottom: 10px;
      padding: 8px;
      width: 98%;
      font-size: 16px;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>


  <h1>Extracted Links</h1>
  <input type="text" id="searchBox" onkeyup="debouncedFilter()" placeholder="Search for links...">
  <table id="linksTable">
    <thead>
      <tr>
        <th>Link</th>
        <th>Source Post</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      {% assign excluded_urls = "https://twitter.com/tomcritchlow/,https://www.linkedin.com/in/tomcritchlow/,https://www.are.na/tom-critchlow/index,https://calendly.com/tomcritchlow," | split: ',' %}
      {% assign all_links = "" | split: "" %}

      {% for post in site.posts %}
        {% assign content = post.output %}
        {% assign links = content | split:'href="' %}
        {% for segment in links offset:1 %}
          {% assign link = segment | split:'"' | first %}
          {% if link contains '://' %}
          {% unless link contains 'tomcritchlow.com' or excluded_urls contains link or all_links contains link %}
            {% assign all_links = all_links | push: link %}
            <tr>
              <td><a href="{{ link }}">{{ link }}</a></td>
              <td><a href="{{ post.url }}">{{ post.title }}</a></td>
              <td>{{ post.date | date: "%Y-%m-%d" }}</td>
            </tr>
          {% endunless %}
          {% endif %}
        {% endfor %}
      {% endfor %}

      {% for post in site.library %}
        {% assign content = post.output %}
        {% assign links = content | split:'href="' %}
        {% for segment in links offset:1 %}
          {% assign link = segment | split:'"' | first %}
          {% if link contains '://' %}
          {% unless link contains 'tomcritchlow.com' or excluded_urls contains link or all_links contains link %}
            {% assign all_links = all_links | push: link %}
            <tr>
              <td><a href="{{ link }}">{{ link }}</a></td>
              <td><a href="{{ post.url }}">{{ post.title }}</a></td>
              <td>{{ post.date_saved | date: "%Y-%m-%d" }}</td>
            </tr>
          {% endunless %}
          {% endif %}
        {% endfor %}
      {% endfor %}
    </tbody>
  </table>

  <script>
    let rows;

    // Initialize rows and debounce the filter function
    document.addEventListener('DOMContentLoaded', () => {
      rows = Array.from(document.querySelectorAll('#linksTable tbody tr'));
    });

    function debounce(func, wait) {
      let timeout;
      return function (...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), wait);
      };
    }

    const debouncedFilter = debounce(filterTable, 200);

    function filterTable() {
      const input = document.getElementById('searchBox');
      const filter = input.value.toLowerCase();
      const batchSize = 100;
      let index = 0;

      function processBatch() {
        const batch = rows.slice(index, index + batchSize);

        batch.forEach(row => {
          const cells = Array.from(row.getElementsByTagName('td'));
          const matches = cells.some(cell => cell.innerText.toLowerCase().includes(filter));
          row.classList.toggle('hidden', !matches);
        });

        index += batchSize;
        if (index < rows.length) {
          requestAnimationFrame(processBatch);
        }
      }

      requestAnimationFrame(processBatch);
    }
  </script>
</body>
</html>
